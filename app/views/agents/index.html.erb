<%= stylesheet_link_tag "agent", "data-turbo-track": "reload" %>

<div class="container lab-page-container">
  <h1 class="lab-page-title">Agents</h1>

  <div class="lab-search-container">
    <input
      type="text"
      id="agent-search-input"
      placeholder="Search Agent"
    >
    <%= link_to 'Add Agent', new_agent_path, class: 'lab-btn primary-btn' %>
  </div>

  <% if @agents.present? %>
  <div class="table-container">
    <table class="lab-list-table">
      <thead class="lab-list-table-head">
      <tr>
        <th class="lab-table-head-field">Name</th>
        <th class="lab-table-head-field">Phone</th>
        <th class="lab-table-head-field">Email</th>
        <th class="lab-table-head-field">Address</th>
        <th class="lab-table-head-field">Actions</th>
      </tr>
      </thead>
      <tbody>
      <% @agents.each do |agent| %>
        <tr>
          <td class="lab-table-data-field"><%= agent.name %></td>
          <td class="lab-table-data-field"><%= agent.phone %></td>
          <td class="lab-table-data-field"><%= agent.email %></td>
          <td class="lab-table-data-field">
            <% if agent.address %>
              <%= agent.address.street %>, <%= agent.address.city %>,
              <%= agent.address.state %>, <%= agent.address.zip %>
              </td>
              <td class="lab-form-table-icons">
                <%= link_to edit_agent_path(agent), class: 'btn btn-primary' do %>
                  <%= image_tag "edit_icon.png", alt: "Edit", class: "lab-form-edit-icon"%>
                <% end %>

                <%= button_to agent_path(agent), method: :delete, data: { confirm: "Are you sure you want to delete this agent?" } do %>
                  <%= image_tag "delete_icon.png", alt: "Delete", class: "lab-form-delete-icon" %>
                <% end %>
              </td>
            <% else %>
              <td class="lab-form-table-icons">
                <%= link_to edit_agent_path(agent), class: 'btn btn-primary' do %>
                  <%= image_tag "edit_icon.png", alt: "Edit", class: "lab-form-edit-icon"%>
                <% end %>

                <%= button_to agent_path(agent), method: :delete, data: { confirm: "Are you sure you want to delete this agent?" } do %>
                  <%= image_tag "delete_icon.png", alt: "Delete", class: "lab-form-delete-icon" %>
                <% end %>
              </td>
              N/A
            <% end %>
            </tr>
      <% end %>
      </tbody>
    </table>
  </div>
  <% else %>
    <p>No agents found. <%= link_to 'Create one now.', new_agent_path %></p>
  <% end %>
</div>